# 🧮 プロジェクト2: 電卓アプリ

四則演算から高度な数学計算まで対応した電卓アプリケーションです。

## 📚 概要

このプロジェクトでは、基本的な電卓から高度な機能を持つ電卓まで、段階的に学習していきます。関数の使い方、エラーハンドリング、クラス設計、ファイルI/Oなど、実践的なプログラミング技術を習得できます。

## 🎯 学習目標

- **関数の設計と活用** - 機能を関数に分割して整理
- **エラーハンドリング** - 安全で信頼性の高いプログラム作成
- **ユーザーインターフェース** - 使いやすいメニューシステム
- **クラス設計** - オブジェクト指向プログラミングの基礎
- **ファイルI/O** - データの保存と読み込み
- **JSON形式** - 構造化データの扱い

## 📁 ファイル構成

```
02_calculator/
├── README.md              # このファイル
├── basic_calculator.py    # 基本電卓（関数ベース）
└── advanced_calculator.py # 高度な電卓（クラスベース）
```

## 🚀 使い方

### 基本電卓

```bash
python3 projects/02_calculator/basic_calculator.py
```

**機能:**
- 四則演算（+、-、×、÷）
- エラーハンドリング（ゼロ除算、無効な入力）
- 継続的な計算
- 分かりやすいユーザーインターフェース

**推奨学習レベル:** basics/05_functions.py 完了後

### 高度な電卓

```bash
python3 projects/02_calculator/advanced_calculator.py
```

**機能:**
- 基本演算 + 高度な数学計算
- 計算履歴の保存・表示
- 設定のカスタマイズ
- JSON形式でのデータ永続化

**推奨学習レベル:** basics/10_classes_and_objects.py 完了後

## 🔢 対応演算

### 基本演算
- ➕ 足し算
- ➖ 引き算  
- ✖️ 掛け算
- ➗ 割り算

### 高度な演算（advanced版のみ）
- 🔺 べき乗（x^y）
- √ 平方根
- ❗ 階乗（n!）
- 📊 対数（log、ln）
- 📐 三角関数（sin、cos、tan）

## ⚙️ 機能詳細

### 基本電卓の特徴

```python
def add(a, b):
    """二つの数を足し算する関数"""
    return a + b

def get_number(prompt):
    """ユーザーから数値を安全に取得"""
    while True:
        try:
            value = input(prompt)
            return float(value)
        except ValueError:
            print("❌ エラー: 有効な数値を入力してください")
```

- **関数による機能分割**: 各演算を独立した関数として実装
- **安全な入力処理**: try-except文を使った堅牢なエラーハンドリング
- **継続的な計算**: ユーザーが終了するまで計算を続行

### 高度な電卓の特徴

```python
class AdvancedCalculator:
    def __init__(self):
        self.history = []
        self.settings = {
            "decimal_places": 6,
            "save_history": True,
            "show_steps": False
        }
```

- **クラス設計**: 状態とメソッドをまとめた設計
- **履歴管理**: 計算結果の自動保存と表示
- **設定システム**: ユーザー好みのカスタマイズ
- **ファイル永続化**: JSON形式でのデータ保存

## 📊 データファイル

高度な電卓では以下のファイルが自動生成されます：

### calculator_settings.json
```json
{
  "decimal_places": 6,
  "save_history": true,
  "show_steps": false
}
```

### calculator_history.json
```json
[
  {
    "timestamp": "2024-01-01T12:00:00",
    "expression": "10 + 5",
    "result": "15"
  }
]
```

## 🎮 実際の使用例

### 基本電卓の実行例

```
🧮 基本電卓アプリ
==================================================
四則演算ができるシンプルな電卓です

🔢 演算を選択してください:
1. 足し算 (+)
2. 引き算 (-)
3. 掛け算 (×)
4. 割り算 (÷)

選択 (1-4): 1
最初の数値を入力: 10
二番目の数値を入力: 5

✅ 計算結果:
   10 + 5 = 15
```

### 高度な電卓の実行例

```
🧮 高度な電卓アプリ
==================================================
1. 基本演算
2. 高度な演算
3. 履歴表示
4. 履歴クリア
5. 設定
6. 設定表示
0. 終了

選択: 2

🧮 高度な演算:
1. べき乗 (x^y)
2. 平方根 (√x)
3. 階乗 (x!)

選択: 2
数値: 16

✅ 結果: √16 = 4
```

## 🔧 カスタマイズ方法

### 新しい演算の追加

```python
def percentage(self, value, percent):
    """パーセント計算"""
    return value * (percent / 100)
```

### エラーハンドリングの改善

```python
def safe_divide(self, a, b):
    """安全な割り算"""
    try:
        if b == 0:
            raise ValueError("ゼロで割ることはできません")
        return a / b
    except TypeError:
        raise ValueError("数値のみ入力してください")
```

## 🧪 テスト方法

### 基本テスト

```python
# 手動テスト例
calculator = AdvancedCalculator()

# 基本演算のテスト
assert calculator.add(2, 3) == 5
assert calculator.multiply(4, 5) == 20

# エラーケースのテスト
try:
    calculator.divide(10, 0)
    assert False, "ゼロ除算エラーが発生するべきです"
except ValueError:
    pass  # 期待される動作
```

## 💡 学習のポイント

### 1. 関数設計の重要性
- 一つの関数は一つの責任
- 再利用可能な小さな部品として設計
- 分かりやすい関数名とドキュメント

### 2. エラーハンドリング
- 予期される例外の適切な処理
- ユーザーフレンドリーなエラーメッセージ
- プログラムのクラッシュを防ぐ

### 3. ユーザーインターフェース
- 直感的で使いやすいメニュー
- 明確な指示とフィードバック
- 継続的な改善の重要性

### 4. データ管理
- 状態の管理（履歴、設定）
- ファイルI/Oによるデータ永続化
- JSON形式の活用

## 🔄 改良案

### 機能拡張のアイデア
1. **式パーサー** - "2+3*4" のような式を直接計算
2. **変数機能** - 計算結果を変数に保存
3. **グラフ機能** - 関数のプロットと可視化
4. **単位変換** - 温度、長さ、重さなどの変換
5. **科学計算** - より多くの数学関数と定数

### コード品質の向上
1. **ユニットテスト** - 自動テストの実装
2. **ドキュメント** - より詳細なコメントと説明
3. **設定ファイル** - 外部設定ファイルの活用
4. **ログ機能** - デバッグ用のログ出力

## 🎓 次のステップ

このプロジェクト完了後の推奨学習：

1. **プロジェクト3** - ToDoマネージャーでファイルI/Oを深く学習
2. **basics/11_standard_library.py** - 標準ライブラリの活用
3. **テストの書き方** - ユニットテストの実装方法
4. **GUI版電卓** - tkinterを使ったグラフィカル版

## ❓ よくある質問

**Q: 計算結果が保存されません**
A: `save_history` 設定が有効になっているか確認してください。設定メニューから変更できます。

**Q: 小数点の桁数を変更したい**
A: 高度な電卓の設定メニューから変更可能です。1-10桁まで設定できます。

**Q: エラーが発生して終了してしまいます**
A: try-except文でエラーをキャッチしているか確認してください。予期しないエラーの場合は、入力値を確認してください。

**Q: 三角関数の値がおかしいです**
A: 角度は度数（0-360）で入力してください。ラジアンではありません。

---

**楽しい計算をお楽しみください！** 🧮✨